import{$ as w,Aa as ct,B as _,D as m,E as a,G as h,H as d,I as l,J as r,K as f,L as F,M as B,N as S,O as c,P as E,Q as s,R as O,S as L,T as G,U as H,Y as b,Z as q,_ as z,ba as N,ca as st,ha as D,ja as I,ka as J,la as mt,ma as x,oa as K,p as k,q as V,qa as Q,r as A,ra as W,t as R,ta as T,ua as X,v as u,va as Y,w as M,wa as Z,xa as tt,y as C,ya as et,z as y}from"./chunk-K2BJVPF6.js";var $=(()=>{let t=class t{constructor(e){this.http=e,this.serverUrl="http://localhost:3000",this.getBlogs=()=>this.http.get(`${this.serverUrl}/blogs`)}getBlogById(e){return this.http.get(`${this.serverUrl}/blogs/${e}`)}addBlog(e){return this.http.post(`${this.serverUrl}/blogs`,e).pipe(k(o=>{console.log("Adding blog: ",o)}))}updateBlog(e,o){return this.http.put(`${this.serverUrl}/blogs/${e}`,o).pipe(k(n=>{console.log("Updating: ",n)}))}deleteBlog(e){return this.http.delete(`${this.serverUrl}/blogs/${e}`).pipe(k(o=>{console.log("Deleting: ",o)}))}deleteAllBlogs(){return this.http.get(`${this.serverUrl}/blogs`).pipe(k(e=>{e.forEach(o=>{this.http.delete(`${this.serverUrl}/blogs/${o.id}`).subscribe(n=>console.error(`Error deleting blog with ID ${o.id}:`,n))})}))}};t.\u0275fac=function(o){return new(o||t)(R(N))},t.\u0275prov=V({token:t,factory:t.\u0275fac,providedIn:"root"});let i=t;return i})();function _t(i,t){if(i&1){let p=S();l(0,"div",13),f(1,"input",14),l(2,"button",15),c("click",function(){let o=C(p).index,n=E();return y(n.deleteComment(o))}),s(3," Delete "),r()()}if(i&2){let p=t.index;m(),d("formControlName",p)}}var nt=(()=>{let t=class t{constructor(e,o,n){this.fb=e,this.blogService=o,this.route=n,this.isEditMode=!1,this.blogId="",this.blogs=this.blogService.getBlogs(),this.blog={},this.blogForm={},this.commentsFormArray={}}ngOnInit(){this.initForm(),this.route.params.subscribe(e=>{let o=e.id;this.blogId=e.id,o&&(this.isEditMode=!0,this.blogService.getBlogById(o).subscribe(n=>{n?(this.blog=n,this.populateForm(n)):console.log("Blog does not exist.")}))})}initForm(){this.blogForm=this.fb.group({title:[""],description:[""],author:[""],comments:this.fb.array([new T("")])}),this.commentsFormArray=this.blogForm.controls.comments}populateForm(e){this.blogForm.patchValue({title:e.title,description:e.description,author:e.author}),e.comments.forEach(o=>{this.commentsFormArray.push(this.fb.control(o))})}addComment(){this.commentsFormArray.push(new T(""))}deleteComment(e){this.commentsFormArray.removeAt(e)}submit(e){this.isEditMode?this.blogService.updateBlog(this.blogId,e).subscribe(()=>{this.resetForm()}):this.blogService.addBlog(e).subscribe(()=>{this.resetForm()})}resetForm(){this.blogForm.reset()}};t.\u0275fac=function(o){return new(o||t)(a(et),a($),a(D))},t.\u0275cmp=u({type:t,selectors:[["app-blog-form"]],decls:25,vars:2,consts:[[1,"container",3,"ngSubmit","formGroup"],[1,"form-group"],["for","title"],["type","text","formControlName","title","id","title",1,"form-control"],["for","description"],["type","text","formControlName","description","id","description",1,"form-control"],["for","author"],["type","text","formControlName","author","id","author",1,"form-control"],["formArrayName","comments"],["for","comments"],["class","input-group mb-3",4,"ngFor","ngForOf"],["type","button",1,"btn","btn-info",3,"click"],[2,"text-align","right"],[1,"input-group","mb-3"],[1,"form-control",3,"formControlName"],["type","button",1,"btn","btn-danger",3,"click"]],template:function(o,n){o&1&&(l(0,"form",0),c("ngSubmit",function(){return n.submit(n.blogForm.value)}),f(1,"br"),l(2,"div",1)(3,"label",2),s(4,"Title"),r(),f(5,"input",3),r(),l(6,"div",1)(7,"label",4),s(8,"Description"),r(),f(9,"input",5),r(),l(10,"div",1)(11,"label",6),s(12,"Author"),r(),f(13,"input",7),r(),F(14,8),l(15,"label",9),s(16,"Comments"),r(),h(17,_t,4,1,"div",10),l(18,"button",11),c("click",function(){return n.addComment()}),s(19," Add Comment "),r(),B(),f(20,"br")(21,"br"),l(22,"div",12)(23,"button",11),c("click",function(){return n.submit(n.blogForm.value)}),s(24," Submit "),r()()()),o&2&&(d("formGroup",n.blogForm),m(17),d("ngForOf",n.commentsFormArray.controls))},dependencies:[b,X,K,Q,W,Y,tt,Z]});let i=t;return i})();var j=(()=>{let t=class t{constructor(e){this.http=e,this.serverUrl="http://localhost:3000",this.getBooks=()=>this.http.get(`${this.serverUrl}/books`)}getBookById(e){return this.http.get(`${this.serverUrl}/books/${e}`)}addBook(e){return this.http.post(`${this.serverUrl}/books`,e).pipe(k(o=>{console.log("Adding book: ",o)}))}updateBook(e,o){return this.http.put(`${this.serverUrl}/books/${e}`,o).pipe(k(n=>{console.log("Updating: ",n)}))}deleteBook(e){return this.http.delete(`${this.serverUrl}/books/${e}`).pipe(k(o=>{console.log("Deleting: ",o)}))}deleteAllBooks(){return this.http.get(`${this.serverUrl}/books`).pipe(k(e=>{e.forEach(o=>{this.http.delete(`${this.serverUrl}/books/${o.id}`).subscribe(n=>{},n=>console.error(`Error deleting book with ID ${o.id}:`,n))})}))}};t.\u0275fac=function(o){return new(o||t)(R(N))},t.\u0275prov=V({token:t,factory:t.\u0275fac,providedIn:"root"});let i=t;return i})();function Ct(i,t){if(i&1){let p=S();l(0,"div",11),f(1,"input",12),l(2,"button",13),c("click",function(){let o=C(p).index,n=E();return y(n.deleteAuthor(o))}),s(3," Delete "),r()()}if(i&2){let p=t.index;m(),d("formControlName",p)}}var lt=(()=>{let t=class t{constructor(e,o,n){this.fb=e,this.bookService=o,this.route=n,this.isEditMode=!1,this.bookId="",this.books=this.bookService.getBooks(),this.book={},this.bookForm={},this.authorFormArray={}}ngOnInit(){this.initForm(),this.route.params.subscribe(e=>{let o=e.id;this.bookId=e.id,o&&(this.isEditMode=!0,this.bookService.getBookById(o).subscribe(n=>{n?(this.book=n,this.populateForm(n)):console.log("Book does not exist")}))})}initForm(){this.bookForm=this.fb.group({name:[""],authors:this.fb.array([new T("")]),isbn:[""]}),this.authorFormArray=this.bookForm.controls.authors}populateForm(e){this.bookForm.patchValue({name:e.name,isbn:e.isbn}),e.authors.forEach(o=>{this.authorFormArray.push(this.fb.control(o))})}addAuthor(){this.authorFormArray.push(new T(""))}deleteAuthor(e){this.authorFormArray.removeAt(e)}submit(e){this.isEditMode?this.bookService.updateBook(this.bookId,e).subscribe(()=>{this.resetForm()}):this.bookService.addBook(e).subscribe(()=>{this.resetForm()})}resetForm(){this.bookForm.reset()}};t.\u0275fac=function(o){return new(o||t)(a(et),a(j),a(D))},t.\u0275cmp=u({type:t,selectors:[["app-book-form"]],decls:22,vars:2,consts:[[1,"container",3,"ngSubmit","formGroup"],[1,"form-group"],["for","name"],["type","text","formControlName","name","id","name",1,"form-control"],["formArrayName","authors"],["for","authors"],["class","input-group mb-3",4,"ngFor","ngForOf"],["type","button",1,"btn","btn-info",3,"click"],["for","isbn"],["type","text","formControlName","isbn","id","isbn",1,"form-control"],[2,"text-align","right"],[1,"input-group","mb-3"],[1,"form-control",3,"formControlName"],["type","button",1,"btn","btn-danger",3,"click"]],template:function(o,n){o&1&&(l(0,"form",0),c("ngSubmit",function(){return n.submit(n.bookForm.value)}),f(1,"br"),l(2,"div",1)(3,"label",2),s(4,"Name"),r(),f(5,"input",3),r(),F(6,4),l(7,"label",5),s(8,"Authors"),r(),h(9,Ct,4,1,"div",6),l(10,"button",7),c("click",function(){return n.addAuthor()}),s(11," Add Author "),r(),f(12,"br")(13,"br"),B(),l(14,"div",1)(15,"label",8),s(16,"ISBN"),r(),f(17,"input",9),r(),f(18,"br"),l(19,"div",10)(20,"button",7),c("click",function(){return n.submit(n.bookForm.value)}),s(21," Submit "),r()()()),o&2&&(d("formGroup",n.bookForm),m(9),d("ngForOf",n.authorFormArray.controls))},dependencies:[b,X,K,Q,W,Y,tt,Z]});let i=t;return i})();function yt(i,t){if(i&1&&(l(0,"li",9),s(1),r()),i&2){let p=t.$implicit;m(),O(p)}}var pt=(()=>{let t=class t{constructor(e){this.router=e,this.delete=new _,this.edit=new _,this.blog={}}onDeleteClick(e){this.delete.emit(e)}onEditClick(e){console.log("edit is clicked: "+e),this.edit.emit(e),this.router.navigate(["blog/form",e])}};t.\u0275fac=function(o){return new(o||t)(a(I))},t.\u0275cmp=u({type:t,selectors:[["app-blog-item"]],inputs:{blog:"blog"},outputs:{delete:"delete",edit:"edit"},decls:17,vars:4,consts:[[1,"card"],[1,"card-body"],[1,"card-title"],[1,"card-text"],[1,"text-muted"],[1,"list-group","list-group-flush"],["class","list-group-item",4,"ngFor","ngForOf"],["type","button",1,"btn","btn-warning",3,"click"],["type","button",1,"btn","btn-danger",3,"click"],[1,"list-group-item"]],template:function(o,n){o&1&&(l(0,"div",0)(1,"div",1)(2,"h5",2),s(3),r(),l(4,"p",3),s(5),r(),l(6,"p",3)(7,"small",4),s(8),r()(),l(9,"ul",5)(10,"p",3),s(11,"Comments:"),r(),h(12,yt,2,1,"li",6),r(),l(13,"button",7),c("click",function(){return n.onEditClick(n.blog.id)}),s(14,"Edit"),r(),l(15,"button",8),c("click",function(){return n.onDeleteClick(n.blog.id)}),s(16,"Delete"),r()()()),o&2&&(m(3),O(n.blog.title),m(2),L("Description: ",n.blog.description,""),m(3),L("Author: ",n.blog.author,""),m(4),d("ngForOf",n.blog.comments))},dependencies:[b]});let i=t;return i})();var ot=(()=>{let t=class t{constructor(e,o,n,g,vt){this.route=e,this.router=o,this.blogService=n,this.bookService=g,this.http=vt,this.dynamicLink="",this.actionEmitter=new _,this.deleteAll=new _}getFormRoute(){let e=this.router.url;return e.includes("blog")?"/blog/form":e.includes("book")?"/book/form":"/blog"}emitDeleteAll(){this.deleteAll.emit()}};t.\u0275fac=function(o){return new(o||t)(a(D),a(I),a($),a(j),a(N))},t.\u0275cmp=u({type:t,selectors:[["app-command-bar"]],outputs:{actionEmitter:"actionEmitter",deleteAll:"deleteAll"},decls:7,vars:1,consts:[["type","button",1,"btn","btn-info",3,"routerLink"],["type","button",1,"btn","btn-danger",3,"click"]],template:function(o,n){o&1&&(l(0,"ul")(1,"li")(2,"button",0),s(3,"ADD"),r()(),l(4,"li")(5,"button",1),c("click",function(){return n.emitDeleteAll()}),s(6,"DELETE ALL"),r()()()),o&2&&(m(2),d("routerLink",n.getFormRoute()))},dependencies:[J],styles:["ul[_ngcontent-%COMP%]{list-style-type:none;margin:0;padding:0;overflow:hidden;background-color:#333}li[_ngcontent-%COMP%]{float:right}li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:block;color:#fff;text-align:right;padding:5px 10px;text-decoration:none}li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover:not(.active){background-color:#015536}.router-link-active[_ngcontent-%COMP%]{background-color:#111}"]});let i=t;return i})();function Bt(i,t){if(i&1){let p=S();l(0,"div")(1,"app-blog-item",3),c("delete",function(o){C(p);let n=E(2);return y(n.deleteBlog(o))}),r()()}if(i&2){let p=t.$implicit;m(),d("blog",p)}}function St(i,t){if(i&1&&(F(0),h(1,Bt,2,1,"div",2),B()),i&2){let p=t.ngIf;m(),d("ngForOf",p)}}var ut=(()=>{let t=class t{constructor(e){this.blogService=e}ngOnInit(){this.fetchBlogs()}fetchBlogs(){this.blogs$=this.blogService.getBlogs()}deleteBlog(e){this.blogService.deleteBlog(e).subscribe(),this.fetchBlogs()}deleteAllBlogs(){this.blogService.deleteAllBlogs().subscribe(()=>{this.fetchBlogs()})}};t.\u0275fac=function(o){return new(o||t)(a($))},t.\u0275cmp=u({type:t,selectors:[["app-blog-list"]],decls:3,vars:3,consts:[[3,"deleteAll"],[4,"ngIf"],[4,"ngFor","ngForOf"],[3,"delete","blog"]],template:function(o,n){o&1&&(l(0,"app-command-bar",0),c("deleteAll",function(){return n.deleteAllBlogs()}),r(),h(1,St,2,1,"ng-container",1),G(2,"async")),o&2&&(m(),d("ngIf",H(2,1,n.blogs$)))},dependencies:[b,q,ot,pt,z]});let i=t;return i})();var Et=[{path:"",component:ut},{path:"form",component:nt},{path:"form/:id",component:nt}],ft=(()=>{let t=class t{};t.\u0275fac=function(o){return new(o||t)},t.\u0275mod=M({type:t}),t.\u0275inj=A({imports:[w,x.forChild(Et),x]});let i=t;return i})();function It(i,t){if(i&1&&(l(0,"li",9),s(1),r()),i&2){let p=t.$implicit;m(),O(p)}}var gt=(()=>{let t=class t{constructor(e){this.router=e,this.delete=new _,this.edit=new _,this.book={}}onDeleteClick(e){this.delete.emit(e)}onEditClick(e){console.log("edit is clicked: "+e),this.edit.emit(e),this.router.navigate(["book/form",e])}};t.\u0275fac=function(o){return new(o||t)(a(I))},t.\u0275cmp=u({type:t,selectors:[["app-book-item"]],inputs:{book:"book"},outputs:{delete:"delete",edit:"edit"},decls:16,vars:3,consts:[[1,"card"],[1,"card-body"],[1,"card-title"],[1,"card-text"],[1,"text-muted"],[1,"list-group","list-group-flush"],["class","list-group-item",4,"ngFor","ngForOf"],["type","button",1,"btn","btn-warning",3,"click"],["type","button",1,"btn","btn-danger",3,"click"],[1,"list-group-item"]],template:function(o,n){o&1&&(l(0,"div",0)(1,"div",1)(2,"h5",2),s(3),r(),l(4,"p",3)(5,"small",4),s(6),r()(),l(7,"ul",5)(8,"p",3),s(9,"Authors:"),r(),h(10,It,2,1,"li",6),r(),l(11,"button",7),c("click",function(){return n.onEditClick(n.book.id)}),s(12,"Edit"),r(),l(13,"button",8),c("click",function(){return n.onDeleteClick(n.book.id)}),s(14,"Delete"),r(),f(15,"div"),r()()),o&2&&(m(3),O(n.book.name),m(3),L("ISBN: ",n.book.isbn,""),m(4),d("ngForOf",n.book.authors))},dependencies:[b]});let i=t;return i})();function At(i,t){if(i&1){let p=S();l(0,"div")(1,"app-book-item",3),c("delete",function(o){C(p);let n=E(2);return y(n.deleteBook(o))}),r()()}if(i&2){let p=t.$implicit;m(),d("book",p)}}function Mt(i,t){if(i&1&&(F(0),h(1,At,2,1,"div",2),B()),i&2){let p=t.ngIf;m(),d("ngForOf",p)}}var ht=(()=>{let t=class t{constructor(e){this.bookService=e}ngOnInit(){this.fetchBooks()}fetchBooks(){this.books$=this.bookService.getBooks()}deleteBook(e){this.bookService.deleteBook(e).subscribe(),this.fetchBooks()}deleteAllBooks(){this.bookService.deleteAllBooks().subscribe(()=>{this.fetchBooks()})}};t.\u0275fac=function(o){return new(o||t)(a(j))},t.\u0275cmp=u({type:t,selectors:[["app-book-list"]],decls:3,vars:3,consts:[[3,"deleteAll"],[4,"ngIf"],[4,"ngFor","ngForOf"],[3,"delete","book"]],template:function(o,n){o&1&&(l(0,"app-command-bar",0),c("deleteAll",function(){return n.deleteAllBooks()}),r(),h(1,Mt,2,1,"ng-container",1),G(2,"async")),o&2&&(m(),d("ngIf",H(2,1,n.books$)))},dependencies:[b,q,ot,gt,z]});let i=t;return i})();var Ot=[{path:"",component:ht},{path:"form",component:lt},{path:"form/:id",component:lt}],bt=(()=>{let t=class t{};t.\u0275fac=function(o){return new(o||t)},t.\u0275mod=M({type:t}),t.\u0275inj=A({imports:[w,x.forChild(Ot),x]});let i=t;return i})();var se=(()=>{let t=class t{constructor(e){this.router=e}logOut(){localStorage.clear(),this.router.navigate(["/login"])}};t.\u0275fac=function(o){return new(o||t)(a(I))},t.\u0275cmp=u({type:t,selectors:[["app-header"]],decls:13,vars:0,consts:[[1,"header"],["routerLink","blog","routerLinkActive","router-link-active"],["routerLink","book","routerLinkActive","router-link-active"],["routerLink","profile","routerLinkActive","router-link-active"],[1,"btn-logout",3,"click"]],template:function(o,n){o&1&&(l(0,"div",0)(1,"ul")(2,"li")(3,"a",1),s(4,"Blog"),r()(),l(5,"li")(6,"a",2),s(7,"Book"),r()(),l(8,"li")(9,"a",3),s(10,"Profile"),r()()(),l(11,"button",4),c("click",function(){return n.logOut()}),s(12,"Logout"),r()())},dependencies:[J,mt],styles:["ul[_ngcontent-%COMP%]{list-style-type:none;margin:0;padding:0;overflow:hidden;background-color:#333}li[_ngcontent-%COMP%]{float:left}li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:block;color:#fff;text-align:center;padding:14px 16px;text-decoration:none}li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover:not(.active){background-color:#111}.router-link-active[_ngcontent-%COMP%]{background-color:#04aa6d}.header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:10px;background-color:#333;color:#fff}.nav-links[_ngcontent-%COMP%]{list-style:none;margin:0;padding:0}.nav-links[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{display:inline-block;margin-right:20px}.nav-links[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:last-child{margin-right:0}.btn-logout[_ngcontent-%COMP%]{background-color:transparent;border:none;color:#fff;cursor:pointer}.btn-logout[_ngcontent-%COMP%]:hover{text-decoration:underline}"]});let i=t;return i})();var ke=(()=>{let t=class t{};t.\u0275fac=function(o){return new(o||t)},t.\u0275mod=M({type:t}),t.\u0275inj=A({imports:[w,x,bt,ft,ct,st]});let i=t;return i})();export{$ as a,nt as b,j as c,lt as d,ft as e,se as f,bt as g,ke as h};
